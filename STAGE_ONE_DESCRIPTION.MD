# ЭТАП 1: Базовый фундамент
Цель - Запустить минимальное приложение с регистрацией, логином (упрощённым) и CRUD кампаниями.

## Результаты этапа
1. Пользователь может зарегистрироваться, войти, создать кампанию и видеть список.
2. Данные сохраняются в PostgreSQL.
3. Интерфейс сделан на React + MUI.

## User Stories
1. Как пользователь, я хочу зарегистрироваться и войти в систему, чтобы получить доступ к моим кампаниям.
2. Как пользователь, я хочу видеть список всех моих кампаний, чтобы управлять ими.
3. Как пользователь, я хочу добавлять новые кампании с названием, бюджетом и датой старта, чтобы планировать маркетинг.
4. Как пользователь, я хочу редактировать и удалять кампании, чтобы управлять актуальностью данных.

## Задачи разработки

1. Инфраструктура и база
- Поднять PostgreSQL локально (через Docker).
- Создать схему базы:
- таблица users (id, email, passwordHash),
- таблица campaigns (id, userId, name, budget, startDate).
- Написать миграции для этих таблиц (например, с помощью TypeORM или Prisma).

2. Backend (NestJS + TS)
- Создать проект NestJS.
- Реализовать модуль Auth (регистрация/логин на JWT, пока без Cognito).
- Реализовать модуль Campaigns:
    - POST /campaigns (создание),
    - GET /campaigns (список кампаний текущего пользователя),
    - PUT /campaigns/:id (редактирование),
    - DELETE /campaigns/:id (удаление).
    - Добавить защиту маршрутов (только авторизованный пользователь видит свои кампании).

3. Frontend (Next.js + TS + MUI)
- Создать проект Next.js.
- Реализовать страницы:
    - /login (форма логина),
    - /register (форма регистрации),
    - /campaigns (список кампаний, таблица на MUI),
    - /campaigns/new (форма добавления кампании).
- Подключить API (через fetch/axios).
- Настроить хранение токена в localStorage или cookie.

4. Интеграция и тестирование
- Проверить регистрацию + логин + CRUD кампаний через Postman.
- Проверить, что фронт получает и отображает данные.
- Добавить базовые unit-тесты на NestJS (например, для AuthService).

## Технические задачи
### Окружение
1. Подготовка инфраструктуры
1.1. Настроить PostgreSQL в Docker
1.2. Поднять контейнер Postgres (например, через docker-compose).
1.3. Создать базу marketing_hub_dev.
1.4. Добавить пользователя/пароль для локальной разработки.

2. Настроить миграции для базы
2.1. Выбрать ORM (Prisma или TypeORM).
2.2. Настроить подключение к БД.
2.3. Создать первую миграцию для users и campaigns.


### Backend (NestJS)
3. Инициализировать NestJS-проект
3.1. Создать базовый проект.
3.2. Настроить подключение к PostgreSQL через ORM.

4. Реализовать регистрацию пользователя
4.1. POST /auth/register → принимает email + пароль.
4.2. Хэшировать пароль (bcrypt).
4.3. Сохранять пользователя в таблицу users.

5. Реализовать логин
5.1. POST /auth/login → принимает email + пароль.
5.2. Проверка пароля.
5.3. Возврат JWT-токена.

6.	Middleware для проверки токена
6.1. Валидация JWT.
6.2. Добавление userId в request.

7. Создать CRUD для кампаний
7.1. POST /campaigns → создать кампанию (name, budget, startDate, userId).
7.2. GET /campaigns → вернуть кампании текущего пользователя.
7.3. PUT /campaigns/:id → обновить кампанию.
7.4. DELETE /campaigns/:id → удалить кампанию.

### Frontend (Next.js + MUI)
8. Инициализировать Next.js-проект
8.1. Добавить TypeScript.
8.2. Установить MUI.
8.3. Настроить базовую структуру страниц.

9. Страница регистрации
9.1. Форма email + пароль.
9.2. Отправка запроса на POST /auth/register.
9.3. Перенаправление на логин после успеха.

10. Страница логина
10.1. Форма email + пароль.
10.2. Отправка запроса на POST /auth/login.
10.3. Сохранение JWT в localStorage/cookie.

11.	Страница списка кампаний
11.1. Запрос GET /campaigns (с токеном).
11.2. Отобразить таблицу кампаний (MUI DataGrid или Table).
11.3. Кнопка «Создать кампанию».

12.	Страница создания кампании
12.1. Форма (name, budget, startDate).
12.2. Отправка POST /campaigns.
12.3. Редирект на список после успеха.

13. Редактирование и удаление кампаний
13.1. Кнопка «Редактировать» → форма с заполненными данными.
13.2. PUT /campaigns/:id.
13.3. Кнопка «Удалить» → DELETE /campaigns/:id.

### Интеграция и тесты
14. Написать unit-тесты для AuthService
14.1. Проверка хэширования пароля.
14.2. Проверка генерации токена.

15. Написать unit-тесты для CampaignService
15.1. Создание кампании с правильным userId.
15.2. Доступ только к своим кампаниям.

16. Проверить API через Postman
16.1. Регистрация/логин.
16.2. CRUD кампаний.

17. Протестировать связку фронта и бэка
17.1. Регистрация и логин с фронта.
17.2. Создание кампании.
17.3. Отображение кампаний в таблице.